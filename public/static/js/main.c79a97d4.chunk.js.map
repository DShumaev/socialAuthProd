{"version":3,"sources":["context/AuthContext.js","hooks/socket.hook.js","pages/MainPage.js","pages/AuthPage.js","hooks/notification.hook.js","hooks/http.hook.js","hooks/auth.hook.js","components/Loader.js","App.js","routes.js","index.js"],"names":["noop","AuthContext","createContext","token","userId","userName","login","logout","isAuthenticated","socket","io","MainPage","useState","messages","setMessages","messagesRef","useRef","auth","useContext","useEffect","on","message","prev","current","scrollTo","className","name","ref","length","map","id","text","date","onClick","emit","type","AuthPage","notice","useCallback","window","M","toast","html","loading","setLoading","error","setError","request","url","a","method","body","headers","JSON","stringify","fetch","response","console","log","json","data","ok","Error","clearError","useHttp","email","password","form","setForm","counterMessage","setCounterMessage","roomId","counter","bro","sis","updateTextFields","changeHandler","event","target","value","registerHandler","loginHandler","placeholder","onChange","htmlFor","style","marginRight","disabled","href","storageName","Loader","display","justifyContent","paddingTop","App","setToken","setUserId","setUserName","ready","setReady","jwtToken","localStorage","setItem","e","QUOTA_EXCEEDED_ERR","alert","removeItem","parse","getItem","useAuth","routes","path","exact","to","useRoutes","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c79a97d4.chunk.js","sourcesContent":["import {createContext} from 'react'\r\n\r\nfunction noop() {}\r\n\r\nexport const AuthContext = createContext({\r\n    token: null,\r\n    userId: null,\r\n    userName: null,\r\n    login: noop,\r\n    logout: noop,\r\n    isAuthenticated: false\r\n})","import io from 'socket.io-client'\r\n\r\nexport const socket = io()\r\n\r\n","import React from 'react'\r\nimport {useState, useRef, useContext, useEffect} from 'react'\r\nimport {AuthContext} from '../context/AuthContext'\r\nimport {socket} from \"../hooks/socket.hook\"\r\n\r\n\r\nexport const MainPage = () => {\r\n    const [messages, setMessages] = useState([])\r\n    const messagesRef = useRef(null)\r\n    const auth = useContext(AuthContext)\r\n\r\n    useEffect(() => {\r\n        socket.on('MESSAGE_FROM_SERVER', (message) => {\r\n            setMessages((prev) => [...prev, message])\r\n        })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        messagesRef.current.scrollTo(0, 99999)\r\n    }, [messages])\r\n\r\n    const sayBroHandler = () => {\r\n        socket.emit('MESSAGE_TO_SERVER', {\r\n            type: 'bro',\r\n            text: 'Bro!',\r\n            userName: auth.userName,\r\n            userId: auth.userId,\r\n            date: null\r\n        })\r\n    }\r\n\r\n    const saySisHandler = () => {\r\n        socket.emit('MESSAGE_TO_SERVER', {\r\n            type: 'sis',\r\n            text: 'Sis!',\r\n            userName: auth.userName,\r\n            userId: auth.userId,\r\n            date: null\r\n        })\r\n    }\r\n\r\n    const exitHandler = () => {\r\n        auth.logout()\r\n    }\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col s8\" >\r\n                <div className=\"card teal darken-1 mainBlock\">\r\n                    <div className=\"center-align\">\r\n                        <h5 className=\"white-text\">{auth.userName}</h5>\r\n                    </div>\r\n                    <div name=\"dialog\" ref={messagesRef} className=\"messages #c8e6c9 teal lighten-1\">\r\n                            {(messages.length > 0)\r\n                                ?\r\n                                messages.map((message, id) =>\r\n                                    (<div key={id} className=\"message\">\r\n                                        <p>{message.text}</p>\r\n                                        <div>\r\n                                            <span className=\"text-darken-3\">\r\n                                                {`Sent by ${message.userName} at ${message.date}`}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>))\r\n                                :\r\n                                <span>\r\n                                    No messages yet :(\r\n                                </span>\r\n                            }\r\n                    </div>\r\n                    <div className=\"buttonContainer\">\r\n                        <a className=\"waves-effect waves-light btn\" onClick={sayBroHandler}>Bro</a>\r\n                        <a className=\"waves-effect waves-light btn\" onClick={saySisHandler}>Sis</a>\r\n                        <a className=\"waves-effect waves-light btn\" onClick={exitHandler}>Exit</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport {useState, useEffect, useContext} from 'react'\r\nimport {useHttp} from \"../hooks/http.hook\"\r\nimport {useNotification} from \"../hooks/notification.hook\"\r\nimport {AuthContext} from \"../context/AuthContext\"\r\nimport {socket} from \"../hooks/socket.hook\"\r\n\r\n\r\nexport const AuthPage = () => {\r\n\r\n    const auth = useContext(AuthContext)\r\n    const notice = useNotification()\r\n    const {loading, error, request, clearError} = useHttp()\r\n    const [form, setForm] = useState({\r\n        email: \"\",\r\n        password: \"\"\r\n    })\r\n\r\n    const [counterMessage, setCounterMessage] = useState({\r\n        'bro': 0,\r\n        'sis': 0\r\n    })\r\n\r\n    useEffect(() => {\r\n        socket.emit('STATISTIC_FROM_SERVER', {\r\n            roomId: 'all'\r\n        })\r\n        socket.on('STATISTIC_FOR_CLIENT', (counter) => {\r\n            console.log('установка статистики')\r\n            setCounterMessage({\r\n                'bro': counter.bro,\r\n                'sis': counter.sis\r\n                })\r\n        })\r\n    }, [])\r\n\r\n    useEffect(async () => {\r\n        const data = await request('/auth/social_network/get_token')\r\n        if (data.token && data.userId && data.userName) {\r\n            auth.login(data.token, data.userId, data.userName)\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        notice(error)\r\n        clearError()\r\n    }, [error, notice, clearError])\r\n\r\n    useEffect(() => {\r\n        window.M.updateTextFields()\r\n    }, [])\r\n\r\n    const changeHandler = event => {\r\n        setForm({ ...form, [event.target.name]: event.target.value})\r\n    }\r\n\r\n    const registerHandler = async () => {\r\n        try {\r\n            const data = await request('/auth/register', 'POST', {...form})\r\n            notice(data.message)\r\n        } catch (e) {\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    const loginHandler = async () => {\r\n        try {\r\n            const data = await request('/auth/login', 'POST', {...form})\r\n            auth.login(data.token, data.userId, data.userName)\r\n        } catch (e) {\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"row mainContainer\">\r\n            <div className=\"col s6 offset-s3\">\r\n                <div className=\"card teal darken-1\">\r\n                    <div className=\"card-content white-text\">\r\n                        <span className=\"card-title\">Login or register </span>\r\n                        <div>\r\n                            <div className=\"input-field\">\r\n                                <input\r\n                                    placeholder=\"enter email\"\r\n                                    id=\"email\"\r\n                                    type=\"text\"\r\n                                    name=\"email\"\r\n                                    value={form.email}\r\n                                    onChange={changeHandler}\r\n                                />\r\n                                <p></p>\r\n                                <label htmlFor=\"email\">Email</label>\r\n                            </div>\r\n                            <div className=\"input-field\">\r\n                                <input\r\n                                    placeholder=\"enter password\"\r\n                                    id=\"password\"\r\n                                    type=\"password\"\r\n                                    name=\"password\"\r\n                                    value={form.password}\r\n                                    onChange={changeHandler}\r\n                                />\r\n                                <label htmlFor=\"password\">Password</label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"card-action\">\r\n                        <button\r\n                            className=\"waves-effect waves-light btn\"\r\n                            style={{marginRight: 10}}\r\n                            onClick={loginHandler}\r\n                            disabled={loading}\r\n                        >\r\n                            Sign In\r\n                        </button>\r\n                        <button\r\n                            className=\"btn grey lighten-1 black-text\"\r\n                            onClick={registerHandler}\r\n                            disabled={loading}\r\n                        >\r\n                            Sign Up\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"card-action\">\r\n                        <span className=\"white-text\">or just use one of social networks below</span>\r\n                    </div>\r\n                    <div className=\"card-action\">\r\n                        <a className=\"waves-effect waves-light btn socialAuthBtn\"\r\n                           href=\"https://sisbro.herokuapp.com/auth/facebook/login\"\r\n                        >\r\n                            Facebook\r\n                        </a>\r\n                        <a className=\"waves-effect waves-light btn socialAuthBtn\"\r\n                           href=\"https://sisbro.herokuapp.com/auth/google/login\"\r\n                        >\r\n                            Google\r\n                        </a>\r\n                        <a className=\"waves-effect waves-light btn socialAuthBtn\"\r\n                           href=\"https://sisbro.herokuapp.com/auth/vkontakte/login\"\r\n                        >\r\n                            Vkontakte\r\n                        </a>\r\n                    </div>\r\n                    <div className=\"card-action\">\r\n                        <div className=\"collapsible\">\r\n                            <div className=\"collapsible-header\">\r\n                                Count of \"Bro!\" message:\r\n                                <span className=\"badge\">{counterMessage.bro}</span>\r\n                            </div>\r\n                            <div className=\"collapsible-header\">\r\n                                Count of \"Sis!\" message:\r\n                                <span className=\"badge right-aligned\">{counterMessage.sis}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import {useCallback} from 'react'\r\n\r\nexport const useNotification = () => {\r\n\r\n    return useCallback((text) => {\r\n        if (window.M && text) {         // Materialize provides an easy way for you to send alerts to your users through toasts\r\n            window.M.toast({html: text})\r\n        }\r\n    }, [])\r\n\r\n}","import {useState, useCallback} from 'react'\r\n\r\n\r\nexport const useHttp = () => {\r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState(null)\r\n\r\n    const request = useCallback(async (url, method = 'GET', body = null, headers = {}) => {\r\n\r\n        setLoading(true)\r\n        try {\r\n            if (body) {\r\n                body = JSON.stringify(body)\r\n                headers['Content-Type'] = 'application/json'\r\n            }\r\n            const response = await fetch(url, {method, body, headers})\r\n            console.log(response)\r\n            const data = await response.json()\r\n            console.log(data)\r\n            if (!response.ok) {\r\n                throw new Error(data.message || 'Something problem with http request')\r\n            }\r\n            setLoading(false)\r\n            return data\r\n        } catch (e) {\r\n            setLoading(false)\r\n            setError(e.message)\r\n            throw e\r\n        }\r\n    }, [])\r\n\r\n    const clearError = useCallback(() => {\r\n        setError(null)\r\n    }, [])\r\n\r\n    return {request, loading, error, clearError}\r\n}","import {useState, useEffect, useCallback} from 'react'\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n    const [token, setToken] = useState(null)\r\n    const [userId, setUserId] = useState(null)\r\n    const [userName, setUserName] = useState(null)\r\n    const [ready, setReady] = useState(false)\r\n\r\n    const login = useCallback((jwtToken, id, name) => {\r\n        setToken(jwtToken)\r\n        setUserId(id)\r\n        setUserName(name)\r\n\r\n        try {\r\n            localStorage.setItem(storageName, JSON.stringify({userId: id, userName: name, token: jwtToken}))\r\n        } catch (e) {\r\n            if (e == window.QUOTA_EXCEEDED_ERR) {\r\n                alert('Limit of data is exceeded for Local Storage')\r\n            }\r\n        }\r\n    }, [])\r\n\r\n    const logout = useCallback(() => {\r\n        setToken(null)\r\n        setUserId(null)\r\n        setUserName(null)\r\n        localStorage.removeItem(storageName)\r\n    }, [login])\r\n\r\n    useEffect(() => {\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n\r\n        if (data && data.token) {\r\n            login(data.token, data.userId, data.userName)\r\n        }\r\n        setReady(true)\r\n    }, [login])\r\n\r\n    return {login, logout, token, userId, userName, ready}\r\n}","import React from 'react'\r\n\r\n\r\nexport const Loader = () => {\r\n\r\n\r\n    return (\r\n        <div style={{display: 'flex', justifyContent: 'center', paddingTop: '2rem'}}>\r\n            <div className=\"preloader-wrapper active\">\r\n                <div className=\"spinner-layer spinner-red-only\">\r\n                    <div className=\"circle-clipper left\">\r\n                        <div className=\"circle\" />\r\n                    </div>\r\n                    <div className=\"gap-patch\">\r\n                        <div className=\"circle\" />\r\n                    </div>\r\n                    <div className=\"circle-clipper right\">\r\n                        <div className=\"circle\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import 'materialize-css'\nimport {BrowserRouter as Router} from 'react-router-dom'\nimport {useRoutes} from './routes'\nimport {useAuth} from \"./hooks/auth.hook\"\nimport {AuthContext} from \"./context/AuthContext\"\nimport {Loader} from \"./components/Loader\"\n\n\nfunction App() {\n    const {login, logout, token, userId, userName, ready} = useAuth()\n    const isAuthenticated = !!token\n    const routes = useRoutes(isAuthenticated)\n\n    if (!ready) {\n        return (\n            <Loader />\n        )\n    }\n\n    return (\n        <AuthContext.Provider value={{login, logout, token, userId, userName, ready}}>\n            <Router>\n                <div className=\"container\">\n                    {routes}\n                </div>\n            </Router>\n        </AuthContext.Provider>\n  )\n}\n\nexport default App\n","import React from 'react'\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport {MainPage} from \"./pages/MainPage\"\r\nimport {AuthPage} from \"./pages/AuthPage\"\r\n\r\n\r\nexport const useRoutes = isAuthenticated => {\r\n\r\n    if (isAuthenticated) {\r\n        return (\r\n            <Switch>\r\n                <Route path=\"/main\" exact>\r\n                    <MainPage />\r\n                </Route>\r\n                <Redirect to=\"/main\" />\r\n            </Switch>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Switch>\r\n            <Route path=\"/auth\" exact>\r\n                <AuthPage />\r\n            </Route>\r\n            <Redirect to=\"/auth\" />\r\n        </Switch>\r\n    )\r\n}\r\n\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './Index.css'\n\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n)\n"],"sourceRoot":""}